<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>éªŒè¯ä¿®å¤</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #f5f5f5; }
    .status { margin: 10px 0; padding: 10px; border-radius: 5px; }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
    canvas { border: 3px solid #8b7355; margin: 20px 0; display: block; }
  </style>
</head>
<body>
  <h1>ğŸ” éªŒè¯ä¿®å¤ç»“æœ</h1>
  <div id="status"></div>
  <canvas id="game-canvas"></canvas>
  
  <script>
    const status = document.getElementById('status');
    
    function addStatus(msg, isSuccess) {
      const div = document.createElement('div');
      div.className = 'status ' + (isSuccess ? 'success' : 'error');
      div.textContent = msg;
      status.appendChild(div);
    }
    
    try {
      addStatus('âœ“ é¡µé¢åŠ è½½æˆåŠŸ', true);
    } catch (e) {
      addStatus('âœ— é¡µé¢åŠ è½½å¤±è´¥: ' + e.message, false);
    }
  </script>
  
  <!-- æŒ‰æ­£ç¡®é¡ºåºåŠ è½½æ¨¡å— -->
  <script src="js/utils/Logger.js"></script>
  <script src="js/utils/EventBus.js"></script>
  <script src="js/core/GameState.js"></script>
  <script src="js/ui/CanvasRenderer.js"></script>
  
  <script>
    try {
      // æ£€æŸ¥æ¨¡å—æ˜¯å¦åŠ è½½
      if (typeof Logger === 'undefined') {
        addStatus('âœ— Logger æœªåŠ è½½', false);
      } else {
        addStatus('âœ“ Logger å·²åŠ è½½', true);
      }
      
      if (typeof EventBus === 'undefined') {
        addStatus('âœ— EventBus æœªåŠ è½½', false);
      } else {
        addStatus('âœ“ EventBus å·²åŠ è½½', true);
      }
      
      if (typeof GameState === 'undefined') {
        addStatus('âœ— GameState æœªåŠ è½½', false);
      } else {
        addStatus('âœ“ GameState å·²åŠ è½½', true);
      }
      
      if (typeof CanvasRenderer === 'undefined') {
        addStatus('âœ— CanvasRenderer æœªåŠ è½½', false);
      } else {
        addStatus('âœ“ CanvasRenderer å·²åŠ è½½', true);
      }
      
      // å°è¯•åˆ›å»ºå®ä¾‹
      addStatus('--- å¼€å§‹å®ä¾‹åŒ–æµ‹è¯• ---', true);
      
      const eventBus = new EventBus();
      addStatus('âœ“ EventBus å®ä¾‹åŒ–æˆåŠŸ', true);
      
      const gameState = new GameState();
      addStatus('âœ“ GameState å®ä¾‹åŒ–æˆåŠŸ, boardSize=' + gameState.boardSize, true);
      
      const renderer = new CanvasRenderer('game-canvas', gameState, eventBus);
      addStatus('âœ“ CanvasRenderer å®ä¾‹åŒ–æˆåŠŸ', true);
      addStatus('âœ“ Canvas å°ºå¯¸: ' + renderer.canvas.width + 'x' + renderer.canvas.height, true);
      
      // æ¸²æŸ“
      renderer.render();
      addStatus('âœ“ render() è°ƒç”¨æˆåŠŸ', true);
      
      // æµ‹è¯•ä¸‹ä¸€æ­¥æ£‹
      gameState.applyMove({ x: 7, y: 7 });
      addStatus('âœ“ åº”ç”¨è½å­æˆåŠŸ', true);
      
      renderer.render();
      addStatus('âœ“ é‡æ–°æ¸²æŸ“æˆåŠŸ', true);
      
      addStatus('=== âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼æ£‹ç›˜åº”è¯¥å·²ç»æ˜¾ç¤º ===', true);
      
    } catch (error) {
      addStatus('âœ— é”™è¯¯: ' + error.message, false);
      addStatus('âœ— Stack: ' + error.stack, false);
    }
  </script>
</body>
</html>
